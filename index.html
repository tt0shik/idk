<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–Ø–ø–æ–Ω—Å–∫–∏–π –∞–ª—Ñ–∞–≤–∏—Ç: –•–∏—Ä–∞–≥–∞–Ω–∞ (–∏–≥—Ä–∞ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è)</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Helvetica Neue', sans-serif;
        }
        body {
            background: linear-gradient(145deg, #1e2b3c 0%, #0f1a26 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: 16px;
        }
        .game-card {
            max-width: 800px;
            width: 100%;
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 48px;
            padding: 32px 24px;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.8), inset 0 1px 2px rgba(255,255,255,0.1);
            color: #f0f3fa;
        }
        h1 {
            font-size: 2.6rem;
            font-weight: 400;
            letter-spacing: 4px;
            text-align: center;
            margin: 0 0 8px 0;
            text-shadow: 0 4px 10px rgba(0,0,0,0.6);
            font-family: 'Yu Mincho', 'Sawarabi Mincho', serif;
        }
        .subtitle {
            text-align: center;
            font-size: 1rem;
            opacity: 0.8;
            margin-bottom: 32px;
            border-bottom: 1px dashed rgba(255,255,240,0.3);
            padding-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .question-area {
            background: rgba(10, 20, 30, 0.7);
            border-radius: 60px;
            padding: 32px 24px;
            margin-bottom: 36px;
            border: 1px solid #4e6b7c;
            box-shadow: inset 0 0 15px #0b141e, 0 12px 24px -8px black;
        }
        .character {
            font-size: 9rem;
            line-height: 1.2;
            text-align: center;
            font-weight: 400;
            margin: 10px 0;
            text-shadow: 0 0 20px #9ec7e0;
            letter-spacing: 8px;
            font-family: 'Noto Sans JP', 'Klee One', 'Sawarabi Mincho', serif;
        }
        .romaji-hint {
            font-size: 2rem;
            text-align: center;
            color: #c0e0ff;
            font-weight: 300;
            background: rgba(0,0,0,0.3);
            border-radius: 60px;
            padding: 8px 20px;
            display: inline-block;
            margin: 0 auto;
            width: auto;
            border: 1px solid #3b5e7a;
            backdrop-filter: blur(4px);
            box-shadow: 0 4px 6px #00000033;
        }
        .hint-container {
            display: flex;
            justify-content: center;
            margin-top: 8px;
        }
        .stats-row {
            display: flex;
            justify-content: space-between;
            background: #101f2b;
            border-radius: 40px;
            padding: 12px 24px;
            margin: 28px 0 24px;
            border: 1px solid #2c485b;
            font-size: 1.4rem;
            font-weight: 500;
            backdrop-filter: blur(4px);
            flex-wrap: wrap;
            gap: 10px;
        }
        .stat-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .stat-badge {
            background: #263f50;
            border-radius: 30px;
            padding: 6px 16px;
            color: #d3ecff;
            font-weight: 600;
        }
        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 18px;
            margin: 32px 0 20px;
        }
        .option-btn {
            background: rgba(20, 40, 55, 0.8);
            border: 2px solid #2f556b;
            color: white;
            font-size: 2rem;
            padding: 24px 12px;
            border-radius: 48px;
            cursor: pointer;
            transition: 0.2s;
            font-weight: 500;
            letter-spacing: 2px;
            backdrop-filter: blur(4px);
            box-shadow: 0 10px 12px -6px black;
            font-family: 'Segoe UI', 'Helvetica Neue', sans-serif;
        }
        .option-btn:hover:not(:disabled) {
            background: #1d4968;
            border-color: #7ab3d0;
            transform: scale(1.02);
            box-shadow: 0 0 20px #3f9fd9;
        }
        .option-btn.correct:disabled {
            background: #1d6b4c;
            border-color: #7fe0b2;
            color: #e6fff2;
            box-shadow: 0 0 18px #30c48b;
        }
        .option-btn.wrong:disabled {
            background: #712e3c;
            border-color: #d66b7a;
            color: #ffd6db;
            opacity: 0.9;
        }
        .option-btn:disabled {
            opacity: 0.8;
            cursor: not-allowed;
            filter: grayscale(0.2);
        }
        .feedback {
            min-height: 60px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            background: #0d1d29;
            border-radius: 40px;
            margin: 20px 0 16px;
            padding: 12px 20px;
            border-left: 6px solid #2e6a8b;
            color: #d0e9ff;
        }
        .next-btn {
            background: linear-gradient(145deg, #316d8a, #18445a);
            border: none;
            color: white;
            font-size: 1.8rem;
            padding: 22px 32px;
            border-radius: 60px;
            font-weight: 600;
            letter-spacing: 3px;
            cursor: pointer;
            width: 100%;
            transition: 0.2s;
            border: 1px solid #4797bf;
            box-shadow: 0 12px 20px -10px #0a141c;
            text-transform: uppercase;
        }
        .next-btn:hover:not(:disabled) {
            background: #3f82a8;
            box-shadow: 0 0 25px #459fd9;
            border-color: #96d0f0;
        }
        .next-btn:disabled {
            opacity: 0.3;
            cursor: default;
        }
        .restart-btn {
            background: transparent;
            border: 1px solid #617e94;
            color: #b3d6f0;
            padding: 14px 28px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 500;
            cursor: pointer;
            transition: 0.2s;
            margin-top: 20px;
            width: auto;
            backdrop-filter: blur(8px);
        }
        .restart-btn:hover {
            background: #203e52;
            border-color: #aad0f0;
        }
        .footer {
            display: flex;
            justify-content: center;
        }
        @media (max-width: 500px) {
            .options-grid { grid-template-columns: 1fr; }
            .character { font-size: 6rem; }
            .option-btn { font-size: 1.8rem; padding: 18px; }
        }
    </style>
</head>
<body>
    <div class="game-card" role="main">
        <h1>„ÅÇ ¬∑ „Åã ¬∑ „Åï</h1>
        <div class="subtitle">–≤—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ</div>

        <!-- –ë–ª–æ–∫ –≤–æ–ø—Ä–æ—Å–∞: –∏–µ—Ä–æ–≥–ª–∏—Ñ + —Ä–æ–º–∞–¥–∂–∏ (–ø–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è –∏–∑—É—á–∞—é—â–∏—Ö) -->
        <div class="question-area">
            <div class="character" id="kanjiDisplay">„ÅÇ</div>
            <div class="hint-container">
                <div class="romaji-hint" id="romajiHint">a</div>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –ø—Ä–∞–≤–∏–ª—å–Ω–æ / –≤—Å–µ–≥–æ / —Ç–æ—á–Ω–æ—Å—Ç—å -->
        <div class="stats-row">
            <span class="stat-item">‚úÖ <span class="stat-badge" id="correctCounter">0</span></span>
            <span class="stat-item">üìã <span class="stat-badge" id="totalCounter">0</span></span>
            <span class="stat-item">üéØ <span class="stat-badge" id="accuracyDisplay">0%</span></span>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞ (—Ä–æ–º–∞–¥–∑–∏) -->
        <div class="options-grid" id="optionsContainer">
            <button class="option-btn" id="opt0">a</button>
            <button class="option-btn" id="opt1">i</button>
            <button class="option-btn" id="opt2">u</button>
            <button class="option-btn" id="opt3">e</button>
        </div>

        <!-- –§–∏–¥–±–µ–∫ –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ -->
        <div class="feedback" id="feedbackMessage">
            ‚ú® –Ω–∞–∂–º–∏ –Ω–∞ –≤–∞—Ä–∏–∞–Ω—Ç
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ "–°–ª–µ–¥—É—é—â–∏–π —Å–∏–º–≤–æ–ª" -->
        <button class="next-btn" id="nextBtn" disabled>‚û° —Å–ª–µ–¥—É—é—â–∏–π</button>

        <!-- –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ (–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫) -->
        <div class="footer">
            <button class="restart-btn" id="restartBtn">üîÑ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
        </div>
    </div>

    <script>
        (function() {
            // ----- –°–õ–û–í–ê–†–¨ –•–ò–†–ê–ì–ê–ù–´ (—Å–∏–º–≤–æ–ª ‚Üí —Ä–æ–º–∞–¥–∑–∏) -----
            const hiraganaSet = [
                { char: '„ÅÇ', romaji: 'a' },
                { char: '„ÅÑ', romaji: 'i' },
                { char: '„ÅÜ', romaji: 'u' },
                { char: '„Åà', romaji: 'e' },
                { char: '„Åä', romaji: 'o' },
                { char: '„Åã', romaji: 'ka' },
                { char: '„Åç', romaji: 'ki' },
                { char: '„Åè', romaji: 'ku' },
                { char: '„Åë', romaji: 'ke' },
                { char: '„Åì', romaji: 'ko' },
                { char: '„Åï', romaji: 'sa' },
                { char: '„Åó', romaji: 'shi' },
                { char: '„Åô', romaji: 'su' },
                { char: '„Åõ', romaji: 'se' },
                { char: '„Åù', romaji: 'so' },
                { char: '„Åü', romaji: 'ta' },
                { char: '„Å°', romaji: 'chi' },
                { char: '„Å§', romaji: 'tsu' },
                { char: '„Å¶', romaji: 'te' },
                { char: '„Å®', romaji: 'to' },
                { char: '„Å™', romaji: 'na' },
                { char: '„Å´', romaji: 'ni' },
                { char: '„Å¨', romaji: 'nu' },
                { char: '„Å≠', romaji: 'ne' },
                { char: '„ÅÆ', romaji: 'no' },
                { char: '„ÅØ', romaji: 'ha' },
                { char: '„Å≤', romaji: 'hi' },
                { char: '„Åµ', romaji: 'fu' },
                { char: '„Å∏', romaji: 'he' },
                { char: '„Åª', romaji: 'ho' },
                { char: '„Åæ', romaji: 'ma' },
                { char: '„Åø', romaji: 'mi' },
                { char: '„ÇÄ', romaji: 'mu' },
                { char: '„ÇÅ', romaji: 'me' },
                { char: '„ÇÇ', romaji: 'mo' },
                { char: '„ÇÑ', romaji: 'ya' },
                { char: '„ÇÜ', romaji: 'yu' },
                { char: '„Çà', romaji: 'yo' },
                { char: '„Çâ', romaji: 'ra' },
                { char: '„Çä', romaji: 'ri' },
                { char: '„Çã', romaji: 'ru' },
                { char: '„Çå', romaji: 're' },
                { char: '„Çç', romaji: 'ro' },
                { char: '„Çè', romaji: 'wa' },
                { char: '„Çí', romaji: 'wo' },
                { char: '„Çì', romaji: 'n' }
            ];

            // --- –ò–≥—Ä–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ---
            let currentItem = null;                // —Ç–µ–∫—É—â–∏–π –æ–±—ä–µ–∫—Ç {char, romaji}
            let currentOptions = [];                // –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ —Ä–æ–º–∞–¥–∑–∏ (4 —à—Ç)
            let correctRomaji = '';
            let answered = false;                   // –±—ã–ª –ª–∏ —É–∂–µ –¥–∞–Ω –æ—Ç–≤–µ—Ç –Ω–∞ —Ç–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å
            let correctCount = 0;
            let totalAttempted = 0;                  // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ (–∫–æ–≥–¥–∞ –æ—Ç–≤–µ—Ç–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–ª–∏ –Ω–µ—Ç)
            let currentCharDisplay = document.getElementById('kanjiDisplay');
            let romajiHintSpan = document.getElementById('romajiHint');
            let optBtns = [
                document.getElementById('opt0'),
                document.getElementById('opt1'),
                document.getElementById('opt2'),
                document.getElementById('opt3')
            ];
            let feedbackEl = document.getElementById('feedbackMessage');
            let nextBtn = document.getElementById('nextBtn');
            let restartBtn = document.getElementById('restartBtn');
            let correctSpan = document.getElementById('correctCounter');
            let totalSpan = document.getElementById('totalCounter');
            let accuracySpan = document.getElementById('accuracyDisplay');

            // --- –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ ---
            function updateStats() {
                correctSpan.textContent = correctCount;
                totalSpan.textContent = totalAttempted;
                let accuracy = totalAttempted === 0 ? 0 : Math.round((correctCount / totalAttempted) * 100);
                accuracySpan.textContent = accuracy + '%';
            }

            // --- –ü–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–∑ hiraganaSet ---
            function getRandomHiraganaItem() {
                const randomIndex = Math.floor(Math.random() * hiraganaSet.length);
                return { ...hiraganaSet[randomIndex] }; // –∫–æ–ø–∏—è
            }

            // --- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 3 —Å–ª—É—á–∞–π–Ω—ã—Ö –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö (–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏ –Ω–µ —Ä–∞–≤–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É) ---
            function generateWrongOptions(correctRomaji, count = 3) {
                let wrongs = new Set();
                // –ø–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ä–æ–º–∞–¥–∑–∏ (—É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö)
                const allRomajiList = hiraganaSet.map(item => item.romaji);
                // –§–∏–ª—å—Ç—Ä—É–µ–º, —á—Ç–æ–±—ã –Ω–µ –≤–∫–ª—é—á–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
                const possibleWrongs = allRomajiList.filter(r => r !== correctRomaji);
                while (wrongs.size < count && wrongs.size < possibleWrongs.length) {
                    const randomIndex = Math.floor(Math.random() * possibleWrongs.length);
                    wrongs.add(possibleWrongs[randomIndex]);
                }
                // –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –Ω–µ–≤–µ—Ä–Ω—ã—Ö (–º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ, –Ω–æ –±—ã–≤–∞–µ—Ç –ø—Ä–∏ –º–∞–ª–æ–º –Ω–∞–±–æ—Ä–µ)
                // –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–∏–º –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–∏
                while (wrongs.size < count) {
                    wrongs.add('?');
                }
                return Array.from(wrongs);
            }

            // --- –ü–µ—Ä–µ–º–µ—à–∞—Ç—å –º–∞—Å—Å–∏–≤ (–∞–ª–≥–æ—Ä–∏—Ç–º –§–∏—à–µ—Ä–∞-–ô–µ—Ç—Å–∞) ---
            function shuffleArray(arr) {
                for (let i = arr.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [arr[i], arr[j]] = [arr[j], arr[i]];
                }
                return arr;
            }

            // --- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞: –≤—ã–±–∏—Ä–∞–µ–º —Å–∏–º–≤–æ–ª, –æ–ø—Ü–∏–∏, –æ–±–Ω–æ–≤–ª—è–µ–º UI ---
            function loadNewQuestion() {
                // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Ö–∏—Ä–∞–≥–∞–Ω—É
                currentItem = getRandomHiraganaItem();
                correctRomaji = currentItem.romaji;

                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º 3 –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞
                let wrongOptions = generateWrongOptions(correctRomaji, 3);

                // –°–æ–∑–¥–∞—ë–º –º–∞—Å—Å–∏–≤ –∏–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ + –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö
                currentOptions = [correctRomaji, ...wrongOptions];

                // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º, —á—Ç–æ–±—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –±—ã–ª –Ω–µ –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–≤—ã–º
                currentOptions = shuffleArray(currentOptions);

                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–∏–º–≤–æ–ª —Ö–∏—Ä–∞–≥–∞–Ω—ã
                currentCharDisplay.textContent = currentItem.char;
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É romaji –º–µ–ª–∫–æ (–¥–ª—è –ø–æ–º–æ—â–∏, –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –∑–∞–±—ã–ª)
                romajiHintSpan.textContent = correctRomaji;   // –æ—Ç–∫—Ä—ã—Ç–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ (–º–æ–∂–Ω–æ —Å–∫—Ä—ã—Ç—å, –Ω–æ –ø—É—Å—Ç—å –±—É–¥–µ—Ç –¥–ª—è –æ–±—É—á–µ–Ω–∏—è)

                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–æ–∫
                for (let i = 0; i < optBtns.length; i++) {
                    optBtns[i].textContent = currentOptions[i];
                }

                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∏–ª–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
                for (let btn of optBtns) {
                    btn.disabled = false;
                    btn.classList.remove('correct', 'wrong');
                }

                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º feedback
                feedbackEl.innerHTML = 'ü§î –≤—ã–±–µ—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥';
                // –î–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É next –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π, –ø–æ–∫–∞ –Ω–µ –æ—Ç–≤–µ—Ç—è—Ç
                nextBtn.disabled = true;
                answered = false;

                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: —É–±–∏—Ä–∞–µ–º –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—Å—Ç–∞—Ç–∫–∏ –ø–æ–¥—Å–≤–µ—Ç–∫–∏
            }

            // --- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –∏–≥—Ä–æ–∫–∞ ---
            function handleOptionClick(btnIndex) {
                if (answered) return; // –µ—Å–ª–∏ —É–∂–µ –æ—Ç–≤–µ—Ç–∏–ª–∏, –±–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ

                const selectedRomaji = currentOptions[btnIndex];
                const isCorrect = (selectedRomaji === correctRomaji);

                // –ë–ª–æ–∫–∏—Ä—É–µ–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏
                for (let btn of optBtns) {
                    btn.disabled = true;
                }

                // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
                for (let i = 0; i < optBtns.length; i++) {
                    const btnRomaji = currentOptions[i];
                    if (btnRomaji === correctRomaji) {
                        optBtns[i].classList.add('correct');
                    } else {
                        // –µ—Å–ª–∏ —ç—Ç–∞ –∫–Ω–æ–ø–∫–∞ –±—ã–ª–∞ –Ω–∞–∂–∞—Ç–∞ –∏ –æ–Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è ‚Äî –ø–æ–¥—Å–≤–µ—Ç–∏–º –∫–∞–∫ wrong
                        if (i === btnIndex && !isCorrect) {
                            optBtns[i].classList.add('wrong');
                        } else {
                            // –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Å—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–º–∏, –Ω–æ disabled
                        }
                    }
                }

                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –µ—Å–ª–∏ –Ω–∞–∂–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, —Ç–æ –æ–Ω–∞ —É–∂–µ –ø–æ–¥—Å–≤–µ—Ç–∏–ª–∞—Å—å –∫–∞–∫ correct, –∞ –µ—Å–ª–∏ –Ω–µ—Ç, —Ç–æ
                // –º—ã –¥–æ–±–∞–≤–∏–ª–∏ wrong –∫ –Ω–∞–∂–∞—Ç–æ–π. –¢–∞–∫–∂–µ –µ—Å–ª–∏ –Ω–∞–∂–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, —Ç–æ –ª–∏—à–Ω–µ–≥–æ wrong –Ω–µ –±—É–¥–µ—Ç.
                // –ù–æ –Ω—É–∂–Ω–æ –µ—â—ë –ø–æ–¥—Å–≤–µ—Ç–∏—Ç—å –Ω–∞–∂–∞—Ç—É—é –∫–Ω–æ–ø–∫—É, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ).
                // –¢–∞–∫–∂–µ –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, –Ω–æ –º—ã —Ö–æ—Ç–∏–º –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω–µ–≤–µ—Ä–µ–Ω ‚Äî –∫–Ω–æ–ø–∫–∞ –ø–æ–ª—É—á–∞–µ—Ç –∫–ª–∞—Å—Å wrong.

                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –ø–æ–ø—ã—Ç–æ–∫
                totalAttempted++;
                if (isCorrect) {
                    correctCount++;
                    feedbackEl.innerHTML = '‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü!';
                } else {
                    feedbackEl.innerHTML = `‚ùå –ù–µ–≤–µ—Ä–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π: ${correctRomaji}`;
                }

                // –ü–æ–º–µ—á–∞–µ–º —á—Ç–æ –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω
                answered = true;

                // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
                nextBtn.disabled = false;

                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                updateStats();
            }

            // --- –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫ –∫–Ω–æ–ø–∫–∞–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ ---
            for (let i = 0; i < optBtns.length; i++) {
                optBtns[i].addEventListener('click', (event) => {
                    event.preventDefault();
                    handleOptionClick(i);
                });
            }

            // --- –ö–Ω–æ–ø–∫–∞ "–°–ª–µ–¥—É—é—â–∏–π" ---
            nextBtn.addEventListener('click', (e) => {
                e.preventDefault();
                if (!nextBtn.disabled) {
                    loadNewQuestion();
                }
            });

            // --- –ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ" (—Å–±—Ä–æ—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –Ω–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å) ---
            restartBtn.addEventListener('click', (e) => {
                e.preventDefault();
                // –°–±—Ä–æ—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                correctCount = 0;
                totalAttempted = 0;
                updateStats();
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                loadNewQuestion();
                // feedback –∑–∞–º–µ–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ loadNewQuestion
            });

            // --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å ---
            loadNewQuestion();
            updateStats();

            // --- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: —É–¥–æ–±—Å—Ç–≤–æ ‚Äî –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ "enter" –Ω–∞ –∫–Ω–æ–ø–∫–µ? –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
        })();
    </script>
</body>
</html>
